@using System
@using System.Threading.Tasks
@using Sandbox;
@using Sandbox.MenuSystem;
@using Sandbox.UI;
@inherits Panel
@namespace Facepunch.Hover
@attribute [StyleSheet]

<root>
    @if ( MapPackage == null )
    {
	    
    }
    else
    {
        <PackageCard Package="@MapPackage" HoverIcon="folder" OnLaunch="@OnMapClicked"></PackageCard>
    }
</root>

@code
{
	public string MapIdent { get; set; } = "facepunch.hv_dune";
    public Action OnClicked { get; set; }
    public Package MapPackage { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        MapPackage = await Package.FetchAsync( MapIdent, true );
    }

    protected override int BuildHash()
    {
        return HashCode.Combine( MapPackage, MapIdent );
    }

    private void OnMapClicked()
    {
        OnClicked?.Invoke();
    }
}
