@using System;
@using System.Linq;
@using Sandbox;
@using Sandbox.UI;
@using Facepunch.Hover;
@using System.Collections.Generic;

@namespace Facepunch.Hover.UI
@attribute [StyleSheet( "/ui/Speedometer.scss" )]
@inherits Panel

@if ( Game.LocalPawn is not HoverPlayer player ) return;

<root class=@(player.LifeState == LifeState.Dead ? "hidden" : "")>
    @{
        var velocity = (player.Velocity.Length * 0.0254f).CeilToInt();
    }

    <label class="amount">@(velocity)m/s</label>
</root>

@code
{
    protected override int BuildHash()
    {
        if ( Game.LocalPawn is not HoverPlayer player )
            return 0;

        return HashCode.Combine( player.LifeState, player.Velocity );
    }
}
